name: CI/CD con Docker

on:
  push:
    branches: [main]
  pull_request:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Build test image (stage "test")
        run: docker build --target test -t app-test:ci .
      - name: Run tests in container
        run: docker run --rm app-test:ci

  deploy:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - name: Simular despliegue
        run: echo "ğŸš€ Desplegando aplicaciÃ³n..."
